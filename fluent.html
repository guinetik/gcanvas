<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GCanvas Fluent API Documentation</title>
  <!-- Prism.js for syntax highlighting -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.css">
  <style>
    *, *::before, *::after {
      box-sizing: border-box;
    }

    html, body {
      overflow-x: hidden;
    }

    body {
      font-family: 'Courier New', 'Consolas', monospace;
      line-height: 1.6;
      color: #333;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background-color: #000;
    }

    header {
      margin-bottom: 40px;
      padding: 20px;
      border-bottom: 2px solid #0f0;
    }

    h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
      color: #0f0;
      font-family: 'Courier New', monospace;
    }

    h2 {
      font-size: 1.8em;
      margin-top: 40px;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid #0f0;
      color: #0f0;
      font-family: 'Courier New', monospace;
    }

    h3 {
      font-size: 1.4em;
      margin-top: 30px;
      color: #0f0;
      font-family: 'Courier New', monospace;
    }

    h4 {
      font-size: 1.2em;
      margin-top: 20px;
      color: #0f0;
      font-family: 'Courier New', monospace;
    }

    p {
      margin-bottom: 15px;
      color: #aaa;
      font-family: 'Courier New', monospace;
    }

    pre {
      background-color: #0a0a0a;
      color: #ccc;
      padding: 15px;
      border: 1px solid #333;
      overflow-x: auto;
      margin: 15px 0;
      font-family: 'Courier New', monospace;
      max-width: 100%;
    }

    code {
      font-family: 'Courier New', monospace;
      background-color: #0a0a0a;
      color: #ccc;
      padding: 2px 4px;
      border: 1px solid #222;
    }

    pre code {
      background-color: transparent;
      padding: 0;
      border: none;
    }

    .pipeline-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 30px 0;
    }

    .pipeline-steps {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
    }

    .pipeline-step {
      background-color: #000;
      color: #0f0;
      padding: 10px 20px;
      border: 1px solid #0f0;
      position: relative;
      font-family: 'Courier New', monospace;
    }

    .pipeline-step:not(:last-child):after {
      content: "→";
      position: absolute;
      right: -15px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 20px;
      color: #0f0;
    }

    .feature-list {
      list-style-type: none;
      padding-left: 0;
    }

    .feature-list li {
      position: relative;
      padding-left: 30px;
      margin-bottom: 10px;
      color: #aaa;
      font-family: 'Courier New', monospace;
    }

    .feature-list li:before {
      content: "> ";
      color: #0f0;
      position: absolute;
      left: 0;
      top: 0;
      font-weight: bold;
    }

    .note {
      background-color: #fff9c4;
      padding: 15px;
      border-left: 4px solid #fbc02d;
      margin: 20px 0;
    }

    .example {
      background-color: #0a0a0a;
      border: 1px solid #333;
      margin: 20px 0;
    }

    .example-title {
      font-weight: bold;
      color: #0f0;
      background-color: #000;
      padding: 10px 15px;
      margin: 0;
      border-bottom: 1px solid #333;
      font-family: 'Courier New', monospace;
    }

    .example-code {
      padding: 15px;
      margin: 0;
      border-radius: 0;
    }

    .canvas-demo {
      width: 100%;
      min-height: 270px;
      background-color: #111;
      border-top: 1px solid #333;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px;
      overflow: hidden;
    }

    .canvas-demo canvas {
      display: block;
      border: 1px solid #333;
    }

    .canvas-label {
      position: absolute;
      bottom: 10px;
      right: 10px;
      background-color: rgba(0, 0, 0, 0.7);
      color: #0f0;
      padding: 4px 8px;
      font-size: 12px;
      font-family: 'Courier New', monospace;
    }

    .comparison-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin: 20px 0;
    }

    .comparison-item {
      background-color: #0a0a0a;
      border: 1px solid #333;
      padding: 15px;
    }

    .comparison-item h4 {
      margin-top: 0;
      border-bottom: 1px solid #333;
      padding-bottom: 10px;
    }

    .entry-points {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }

    .entry-point-item {
      background-color: #0a0a0a;
      border: 1px solid #333;
      border-radius: 5px;
      padding: 15px;
      text-align: center;
      font-family: 'Courier New', monospace;
    }

    .entry-point-item h4 {
      margin-top: 0;
    }

    .entry-point-item h5 {
      color: #0f0;
      margin: 0 0 10px 0;
      font-family: 'Courier New', monospace;
    }

    .entry-point-item p {
      margin: 0;
      font-size: 0.9em;
      color: #999;
      font-family: 'Courier New', monospace;
    }

    @media (max-width: 768px) {
      .pipeline-steps {
        flex-direction: column;
      }

      .pipeline-step:not(:last-child):after {
        content: "↓";
        position: absolute;
        bottom: -20px;
        left: 50%;
        transform: translateX(-50%);
        right: auto;
        top: auto;
      }

      .comparison-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body>
  <header>
    <h1>GCanvas Fluent API</h1>
    <p>A declarative, chainable API for rapid game development and creative coding</p>
  </header>

  <section>
    <h2>Overview</h2>
    <p>
      The Fluent API provides a builder-pattern layer on top of GCanvas's object-oriented architecture.
      Instead of manually instantiating classes and wiring them together, you chain method calls to
      declaratively build your game structure.
    </p>

    <h3>Builder Chain</h3>
    <p>
      The fluent API uses a chain of builder classes that wrap the underlying GCanvas classes:
    </p>

    <div class="pipeline-container">
      <div class="pipeline-steps">
        <div class="pipeline-step">gcanvas()</div>
        <div class="pipeline-step">FluentGame</div>
        <div class="pipeline-step">FluentScene</div>
        <div class="pipeline-step">FluentGO</div>
        <div class="pipeline-step">Shapes</div>
      </div>
    </div>

    <h4>Key Features:</h4>
    <ul class="feature-list">
      <li>Chainable method calls for declarative game building</li>
      <li>Two entry points: <code>gcanvas()</code> for games, <code>sketch()</code> for creative coding</li>
      <li>Named refs system for easy object access</li>
      <li>Built-in motion presets (pulse, orbit, oscillate, etc.)</li>
      <li>Shared state management across scenes</li>
    </ul>
  </section>

  <section>
    <h2>Entry Points</h2>
    <p>
      The Fluent API provides two entry points, each designed for different use cases:
    </p>

    <div class="entry-points">
      <div class="entry-point-item">
        <h5>gcanvas(options)</h5>
        <p>Full game development API with scenes, GameObjects, events, and state management</p>
      </div>
      <div class="entry-point-item">
        <h5>sketch(w, h, bg)</h5>
        <p>Minimal API for quick creative coding, generative art, and prototypes</p>
      </div>
    </div>
  </section>

  <section>
    <h2>Hello World with gcanvas()</h2>
    <p>
      The simplest way to get started is to create a scene with a single shape.
      The <code>gcanvas()</code> function creates a canvas, initializes the game engine,
      and returns a fluent builder you can chain methods on.
    </p>

    <div class="example">
      <div class="example-title">Example: Basic circle with gcanvas()</div>
      <pre><code class="language-javascript">import { gcanvas } from 'gcanvas';

gcanvas({ bg: '#1a1a2e' })
  .scene('game')
    .go({ x: 200, y: 125 })
      .circle({ radius: 40, fill: '#00ff88' })
  .start();</code></pre>
      <div class="canvas-demo">
        <canvas id="hello-canvas" width="400" height="250"></canvas>
        <div class="canvas-label">Hello World</div>
      </div>
    </div>

    <h4>What's happening:</h4>
    <ul class="feature-list">
      <li><code>gcanvas({ bg: '#1a1a2e' })</code> creates a canvas with dark background</li>
      <li><code>.scene('game')</code> creates a scene named "game"</li>
      <li><code>.go({ x: 200, y: 125 })</code> creates a GameObject at position (200, 125)</li>
      <li><code>.circle({ radius: 40, fill: '#00ff88' })</code> adds a green circle to the GO</li>
      <li><code>.start()</code> starts the game loop</li>
    </ul>
  </section>

  <section>
    <h2>The Builder Chain</h2>
    <p>
      Each method in the chain returns a builder object that provides relevant methods.
      Use <code>.end()</code> to navigate back up the chain, or call sibling methods directly.
    </p>

    <div class="example">
      <div class="example-title">Example: Multiple shapes in a scene</div>
      <pre><code class="language-javascript">import { gcanvas } from 'gcanvas';

gcanvas({ bg: '#1a1a2e' })
  .scene('game')
    .go({ x: 80, y: 125 })
      .circle({ radius: 30, fill: '#ff6b6b' })
    .end()  // Back to scene
    .go({ x: 200, y: 125 })
      .star({ points: 5, radius: 35, fill: '#ffd93d' })
    .end()
    .go({ x: 320, y: 125 })
      .rect({ width: 50, height: 50, fill: '#6bcb77' })
  .start();</code></pre>
      <div class="canvas-demo">
        <canvas id="chain-canvas" width="400" height="250"></canvas>
        <div class="canvas-label">Builder chain navigation</div>
      </div>
    </div>

    <h4>Navigation methods:</h4>
    <ul class="feature-list">
      <li><code>.end()</code> - Go back to parent context</li>
      <li><code>.scene(name)</code> - Switch to or create a scene</li>
      <li><code>.go(options)</code> - Create a sibling GameObject</li>
    </ul>
  </section>

  <section>
    <h2>Adding Shapes</h2>
    <p>
      The FluentGO builder provides shortcut methods for all GCanvas shapes.
      Each method accepts an options object for customization.
    </p>

    <div class="example">
      <div class="example-title">Example: Shape variety</div>
      <pre><code class="language-javascript">import { gcanvas } from 'gcanvas';

gcanvas({ bg: '#111' })
  .scene('shapes')
    .go({ x: 40, y: 125 }).triangle({ size: 30, fill: '#ff6b6b' }).end()
    .go({ x: 105, y: 125 }).hexagon({ radius: 18, fill: '#c44dff' }).end()
    .go({ x: 170, y: 125 }).diamond({ width: 28, height: 36, fill: '#4ecdc4' }).end()
    .go({ x: 235, y: 125 }).heart({ size: 26, fill: '#ff6b9d' }).end()
    .go({ x: 300, y: 125 }).cross({ size: 26, thickness: 6, fill: '#ffd93d' }).end()
    .go({ x: 365, y: 125 }).ring({ innerRadius: 10, outerRadius: 18, fill: '#a8e6cf' }).end()
    .go({ x: 430, y: 125 }).star({ points: 6, radius: 18, fill: '#ff8c42' }).end()
    .go({ x: 470, y: 125 }).cloud({ size: 22, fill: '#dfe6e9' })
  .start();</code></pre>
      <div class="canvas-demo">
        <canvas id="shapes-canvas" width="550" height="250"></canvas>
        <div class="canvas-label">Available shapes</div>
      </div>
    </div>

    <h4>Available shape methods:</h4>
    <ul class="feature-list">
      <li>Basic: <code>.circle()</code>, <code>.rect()</code>, <code>.square()</code>, <code>.triangle()</code>, <code>.line()</code></li>
      <li>Complex: <code>.star()</code>, <code>.hexagon()</code>, <code>.diamond()</code>, <code>.heart()</code>, <code>.ring()</code></li>
      <li>Decorative: <code>.arrow()</code>, <code>.cross()</code>, <code>.pin()</code>, <code>.cloud()</code></li>
      <li>Special: <code>.text()</code>, <code>.image()</code>, <code>.svg()</code></li>
    </ul>
  </section>

  <section>
    <h2>Motion & Animation</h2>
    <p>
      FluentGO provides built-in motion presets that animate GameObjects with a single method call.
      Each motion runs automatically in the game loop.
    </p>

    <div class="example">
      <div class="example-title">Example: Built-in motion presets</div>
      <pre><code class="language-javascript">import { gcanvas } from 'gcanvas';

gcanvas({ bg: '#1a1a2e' })
  .scene('motion')
    // Pulsing circle
    .go({ x: 100, y: 125 })
      .circle({ radius: 30, fill: '#ff6b6b' })
      .pulse({ min: 0.7, max: 1.3, duration: 1 })
    .end()
    // Oscillating star
    .go({ x: 200, y: 125 })
      .star({ points: 5, radius: 25, fill: '#ffd93d' })
      .oscillate({ prop: 'y', min: -30, max: 30, duration: 2 })
    .end()
    // Orbiting shape
    .go({ x: 300, y: 125 })
      .hexagon({ radius: 20, fill: '#4ecdc4' })
      .orbit({ radiusX: 40, radiusY: 40, duration: 3 })
  .start();</code></pre>
      <div class="canvas-demo">
        <canvas id="motion-canvas" width="400" height="250"></canvas>
        <div class="canvas-label">Motion presets in action</div>
      </div>
    </div>

    <h4>Available motion methods:</h4>
    <ul class="feature-list">
      <li><code>.pulse()</code> - Scale up and down</li>
      <li><code>.oscillate()</code> - Move back and forth on an axis</li>
      <li><code>.orbit()</code> - Circular/elliptical orbit</li>
      <li><code>.float()</code> - Random wandering</li>
      <li><code>.shake()</code> - Shake effect with decay</li>
      <li><code>.bounce()</code> - Bouncing motion</li>
      <li><code>.spiral()</code> - Spiral outward/inward</li>
      <li><code>.pendulum()</code> - Swinging rotation</li>
    </ul>
  </section>

  <section>
    <h2>Sketch Mode</h2>
    <p>
      For quick creative coding experiments, <code>sketch()</code> provides an ultra-minimal API.
      It's perfect for generative art, Genuary sketches, or rapid prototyping.
    </p>

    <div class="example">
      <div class="example-title">Example: Radial pattern with sketch()</div>
      <pre><code class="language-javascript">import { sketch } from 'gcanvas';

sketch(400, 250, '#1a1a2e')
  .radial(200, 125, 80, 12, (api, x, y, angle, i) =&gt; {
    api.circle(x, y, 15, `hsl(${i * 30}, 70%, 60%)`);
  })
  .update((dt, ctx) =&gt; {
    ctx.shapes.forEach((shape, i) =&gt; {
      shape.rotation += dt * (i % 2 === 0 ? 1 : -1);
    });
  })
  .start();</code></pre>
      <div class="canvas-demo">
        <canvas id="sketch-canvas" width="400" height="250"></canvas>
        <div class="canvas-label">Sketch mode radial pattern</div>
      </div>
    </div>

    <h4>Sketch mode features:</h4>
    <ul class="feature-list">
      <li>Direct shape creation: <code>.circle(x, y, r, fill)</code></li>
      <li>Bulk creation: <code>.grid()</code>, <code>.repeat()</code>, <code>.radial()</code></li>
      <li>Simple update loop with <code>.update(fn)</code></li>
      <li>Access to shapes array for animation</li>
    </ul>
  </section>

  <section>
    <h2>Events & Interactivity</h2>
    <p>
      Register event handlers with <code>.on()</code> to respond to user input and game events.
      Keyboard events can be filtered by key using the <code>keydown:key</code> syntax.
    </p>

    <div class="example">
      <div class="example-title">Example: Interactive scene</div>
      <pre><code class="language-javascript">import { gcanvas } from 'gcanvas';

const game = gcanvas({ bg: '#111' });

game.scene('interactive')
  .go({ x: 200, y: 100, name: 'clickTarget' })
    .circle({ radius: 40, fill: '#ff6b6b' })
    .on('click', (ctx) =&gt; {
      // ctx.go is the clicked GameObject
      ctx.go.scaleX = 1.2;
      ctx.go.scaleY = 1.2;
      setTimeout(() =&gt; {
        ctx.go.scaleX = 1;
        ctx.go.scaleY = 1;
      }, 100);
    })
  .end()
  .go({ x: 200, y: 200 })
    .text('Click the circle!', { fill: '#aaa' });

game.start();</code></pre>
      <div class="canvas-demo">
        <canvas id="events-canvas" width="400" height="250"></canvas>
        <div class="canvas-label">Click the circle!</div>
      </div>
    </div>

    <h4>Event handling features:</h4>
    <ul class="feature-list">
      <li><code>.on('update', fn)</code> - Called every frame</li>
      <li><code>.on('click', fn)</code> - Mouse click events</li>
      <li><code>.on('keydown:space', fn)</code> - Filtered key events</li>
      <li><code>.state({})</code> - Shared state object</li>
      <li><code>ctx.refs</code> - Access named objects</li>
    </ul>
  </section>

  <section>
    <h2>Learn More</h2>
    <p>
      For complete API documentation, see the
      <a href="../docs/modules/fluent/README.md" style="color: #0f0;">Fluent Module Reference</a>.
    </p>
    <p>
      For a full game example using the Fluent API, check out the
      <a href="space.html" style="color: #0f0;">Space Invaders</a> demo.
    </p>
  </section>

  <!-- Prism.js scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>

  <!-- Demo scripts -->
  <script type="module" src="./js/fluent.js"></script>
</body>

</html>

<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>GCanvas Demos</title>
        <link rel="stylesheet" href="demos.css" />

        <!-- Google Analytics -->
        <script
            async
            src="https://www.googletagmanager.com/gtag/js?id=G-1GHJD0LM4Z"
        ></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag("js", new Date());
            gtag("config", "G-1GHJD0LM4Z", { send_page_view: false });

            // Track virtual pageviews on hash changes
            function trackPageView(route) {
                gtag("event", "page_view", {
                    page_title: route + " - GCanvas Demos",
                    page_path: "/demos/" + route,
                });
            }
        </script>
    </head>

    <body>
        <!-- Mobile Header (hidden on desktop) -->
        <header class="mobile-header">
            <img src="./logo.svg" alt="GCanvas Logo" class="mobile-logo" />
            <span class="mobile-title">GCANVAS</span>
            <button
                class="hamburger"
                id="hamburger-btn"
                aria-label="Toggle menu"
            >
                <span></span>
                <span></span>
                <span></span>
            </button>
        </header>

        <!-- Overlay for closing menu when clicking outside -->
        <div class="nav-overlay" id="nav-overlay"></div>

        <nav id="main-nav">
            <div class="nav-branding">
                <div style="text-align: center; margin-bottom: 1em">
                    <img
                        src="./logo.svg"
                        alt="Logo"
                        width="90"
                        height="80"
                        style="display: inline-block; vertical-align: middle"
                    />
                </div>
                <div style="text-align: center; margin-bottom: 1em">
                    <h1
                        style="
                            letter-spacing: 2px;
                            margin-bottom: 0.3em;
                            margin-top: 0.25em;
                            font-family: monospace;
                            font-size: 2em;
                            color: #ccc;
                        "
                    >
                        GCANVAS
                    </h1>
                    <hr style="margin: 0.5em 1.6em" />
                    <a
                        href="https://github.com/guinetik/gcanvas"
                        target="_blank"
                        title="View on GitHub"
                        style="
                            display: inline-block;
                            background: white;
                            border-radius: 50%;
                            width: 36px;
                            height: 36px;
                            margin: 0.5em;
                            box-shadow: 0 2px 6px #0002;
                        "
                    >
                        <svg
                            viewBox="0 0 16 16"
                            width="22"
                            height="22"
                            aria-hidden="true"
                            fill="#fff"
                            style="margin: 7px 0 0 0"
                        >
                            <path
                                d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38
              0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52
              -.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.5-1.07-1.78-.2
              -3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12
              0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04
              2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15
              0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01
              2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"
                            ></path>
                        </svg>
                    </a>
                </div>
                <hr />
            </div>
            <h2 style="margin-bottom: 0.3em">Docs</h2>
            <a href="pipeline.html" target="demo-frame">Rendering Pipeline</a>
            <a href="fluent.html" target="demo-frame">Fluent API</a>
            <hr />
            <h2>Demos</h2>
            <h3>Game</h3>
            <a href="basic.html" target="demo-frame">Basic</a>
            <a href="loop.html" target="demo-frame">Game Loop</a>
            <a href="events.html" target="demo-frame">Event Handlers</a>
            <h3>Shapes</h3>
            <a href="shapes.html" target="demo-frame" class="active"
                >Shape Gallery</a
            >
            <a href="visibility.html" target="demo-frame">Visibility</a>
            <a href="opacity.html" target="demo-frame">Opacity</a>
            <a href="transforms.html" target="demo-frame">Transforms</a>
            <a href="group.html" target="demo-frame">Groups</a>
            <a href="particles.html" target="demo-frame">Shape Particles</a>
            <a href="patterns.html" target="demo-frame">Image Patterns</a>
            <a href="fractals.html" target="demo-frame">Fractals</a>
            <h3>Painter</h3>
            <a href="painter.html" target="demo-frame">Painter</a>
            <a href="bezier.html" target="demo-frame">Bezier Curves</a>
            <a href="beziersignature.html" target="demo-frame"
                >Bezier Signature</a
            >
            <a href="blob.html" target="demo-frame">Bezier Blob</a>
            <a href="svgtween.html" target="demo-frame">SVG Motion</a>
            <h3>Motion</h3>
            <a href="animations.html" target="demo-frame">Animations</a>
            <a href="easing.html" target="demo-frame">Easing</a>
            <a href="tween.html" target="demo-frame">Tween</a>
            <a href="particles-showcase.html" target="demo-frame"
                >Particle System</a
            >
            <h3>Scene</h3>
            <a href="scene.html" target="demo-frame">Scene</a>
            <a href="mondrian.html" target="demo-frame">Mondrian</a>
            <a href="layouts.html" target="demo-frame">Scene Layouts</a>
            <a href="tiles.html" target="demo-frame">Tile Layout</a>
            <a href="isometric.html" target="demo-frame">Isometric</a>
            <a href="scenes.html" target="demo-frame">Scene Transforms</a>
            <hr />
            <h2 style="margin-bottom: 0.3em">Generative Art</h2>
            <a href="genart.html" target="demo-frame">Hypnotic Mandala</a>
            <a href="gendream.html" target="demo-frame">Fractal Plasma</a>
            <a href="lavalamp.html" target="demo-frame">Lava Lamp</a>
            <a href="baskara.html" target="demo-frame">Root Dance</a>
            <hr />
            <h2 style="margin-bottom: 0.3em">Math & Physics</h2>
            <a href="schrodinger.html" target="demo-frame">Schrodinger Wave</a>
            <a href="spacetime.html" target="demo-frame">Spacetime Curvature</a>
            <a href="schwarzschild.html" target="demo-frame"
                >Schwarzschild Metric</a
            >
            <a href="kerr.html" target="demo-frame">Kerr Metric</a>
            <a href="blackhole.html" target="demo-frame">Black Hole</a>
            <a href="tde.html" target="demo-frame">Tidal Disruption</a>
            <hr />
            <h2 style="margin-bottom: 0.3em">Games</h2>
            <a href="space.html" target="demo-frame">Space Invaders</a>
            <a href="penrose-game.html" target="demo-frame"
                >Penrose Spacetime</a
            >
            <hr />
        </nav>
        <iframe name="demo-frame" id="demo-frame" src="shapes.html"></iframe>

        <!-- Simple script to highlight the active link -->
        <script>
            // Wait for the DOM to load
            document.addEventListener("DOMContentLoaded", () => {
                const links = document.querySelectorAll("nav a");

                links.forEach((link) => {
                    link.addEventListener("click", () => {
                        // Remove .active from all links
                        links.forEach((l) => l.classList.remove("active"));
                        // Add .active to the clicked link
                        link.classList.add("active");
                    });
                });
            });
        </script>

        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const links = document.querySelectorAll("nav a");
                const iframe = document.getElementById("demo-frame");

                /**
                 * Parse the hash in the form "#/shapes" => returns "shapes".
                 * Default to "shapes" if there's no valid hash.
                 */
                function getRouteFromHash() {
                    if (location.hash.startsWith("#/")) {
                        return location.hash.slice(2); // remove "#/"
                    }
                    return "shapes"; // fallback route
                }

                /**
                 * Load the given route into the iframe, e.g. route="shapes" => "shapes.html"
                 * Also highlight the corresponding link and track pageview.
                 */
                function loadRoute(route) {
                    // Set iframe src
                    iframe.src = route + ".html";

                    // Highlight the active link
                    links.forEach((link) => {
                        // link.href might be "shapes.html"
                        // remove ".html" => "shapes"
                        const linkRoute = link
                            .getAttribute("href")
                            .replace(".html", "");
                        link.classList.toggle("active", linkRoute === route);
                    });

                    // Track virtual pageview
                    if (typeof trackPageView === "function") {
                        trackPageView(route);
                    }
                }

                /**
                 * On initial load (and whenever the hash changes), parse the route and load it.
                 */
                function handleHashChange() {
                    const route = getRouteFromHash();
                    loadRoute(route);
                }

                // 1) On page load, handle the existing hash (if any).
                handleHashChange();

                // 2) Listen for future hash changes
                window.addEventListener("hashchange", handleHashChange);

                // 3) Intercept clicks on nav links so we can
                //    set location.hash instead of letting them navigate directly.
                links.forEach((link) => {
                    link.addEventListener("click", (e) => {
                        e.preventDefault(); // stop normal link navigation

                        // e.g. "shapes.html"
                        const href = link.getAttribute("href");
                        // remove ".html" => "shapes"
                        const routeName = href.replace(".html", "");

                        // set the hash: "#/shapes"
                        location.hash = "/" + routeName;
                    });
                });
            });
        </script>

        <!-- Hamburger Menu Toggle -->
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const hamburgerBtn = document.getElementById("hamburger-btn");
                const nav = document.getElementById("main-nav");
                const overlay = document.getElementById("nav-overlay");

                function toggleMenu() {
                    nav.classList.toggle("open");
                    overlay.classList.toggle("open");
                    hamburgerBtn.classList.toggle("active");
                }

                function closeMenu() {
                    nav.classList.remove("open");
                    overlay.classList.remove("open");
                    hamburgerBtn.classList.remove("active");
                }

                hamburgerBtn.addEventListener("click", toggleMenu);
                overlay.addEventListener("click", closeMenu);

                // Close menu when a link is clicked (on mobile)
                const links = document.querySelectorAll("nav a");
                links.forEach((link) => {
                    link.addEventListener("click", () => {
                        if (window.innerWidth <= 768) {
                            closeMenu();
                        }
                    });
                });
            });
        </script>
    </body>
</html>

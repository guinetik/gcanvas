<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GCanvas Origin System Documentation</title>
  <!-- Prism.js - base theme then override -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.css">
  <style>
    /* Terminal-style Prism overrides */
    code[class*="language-"],
    pre[class*="language-"] {
      color: #ccc;
      background: #0a0a0a;
      text-shadow: none;
    }
    pre[class*="language-"] {
      background: #0a0a0a;
      border: 1px solid #1a1a1a;
    }
    .token.comment,
    .token.prolog,
    .token.doctype,
    .token.cdata { color: #555; }
    .token.punctuation { color: #888; }
    .token.property,
    .token.tag,
    .token.constant,
    .token.symbol,
    .token.deleted { color: #0f0; }
    .token.boolean,
    .token.number { color: #0ff; }
    .token.selector,
    .token.attr-name,
    .token.string,
    .token.char,
    .token.builtin,
    .token.inserted { color: #7fff7f; }
    .token.operator,
    .token.entity,
    .token.url,
    .language-css .token.string,
    .style .token.string,
    .token.variable { color: #ccc; }
    .token.atrule,
    .token.attr-value,
    .token.function,
    .token.class-name { color: #0f0; }
    .token.keyword { color: #0f0; font-weight: bold; }
    .token.regex,
    .token.important { color: #fd8; }
  </style>
  <style>
    *, *::before, *::after {
      box-sizing: border-box;
    }

    html, body {
      overflow-x: hidden;
    }

    body {
      font-family: 'Courier New', 'Consolas', monospace;
      line-height: 1.6;
      color: #333;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background-color: #000;
    }

    header {
      margin-bottom: 40px;
      padding: 20px;
      border-bottom: 2px solid #0f0;
    }

    h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
      color: #0f0;
      font-family: 'Courier New', monospace;
    }

    h2 {
      font-size: 1.8em;
      margin-top: 40px;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid #0f0;
      color: #0f0;
      font-family: 'Courier New', monospace;
    }

    h3 {
      font-size: 1.4em;
      margin-top: 30px;
      color: #0f0;
      font-family: 'Courier New', monospace;
    }

    h4 {
      font-size: 1.2em;
      margin-top: 20px;
      color: #0f0;
      font-family: 'Courier New', monospace;
    }

    p {
      margin-bottom: 15px;
      color: #aaa;
      font-family: 'Courier New', monospace;
    }

    pre {
      background-color: #0a0a0a;
      color: #ccc;
      padding: 15px;
      border: 1px solid #1a1a1a;
      overflow-x: auto;
      margin: 15px 0;
      font-family: 'Courier New', monospace;
      max-width: 100%;
    }

    code {
      font-family: 'Courier New', monospace;
      background-color: #111;
      color: #0f0;
      padding: 2px 6px;
      border: none;
    }

    pre code {
      background-color: transparent;
      color: #ccc;
      padding: 0;
      border: none;
    }

    .feature-list {
      list-style-type: none;
      padding-left: 0;
    }

    .feature-list li {
      position: relative;
      padding-left: 30px;
      margin-bottom: 10px;
      color: #aaa;
      font-family: 'Courier New', monospace;
    }

    .feature-list li:before {
      content: "> ";
      color: #0f0;
      position: absolute;
      left: 0;
      top: 0;
      font-weight: bold;
    }

    .note {
      background-color: #0a1a0a;
      padding: 15px;
      border-left: 2px solid #0f0;
      margin: 20px 0;
      color: #7fff7f;
    }

    .warning {
      background-color: #1a1a0a;
      padding: 15px;
      border-left: 2px solid #ff0;
      margin: 20px 0;
      color: #ffa;
    }

    .example {
      background-color: #0a0a0a;
      border: 1px solid #1a1a1a;
      margin: 20px 0;
    }

    .example-title {
      font-weight: bold;
      color: #0f0;
      background-color: #050505;
      padding: 10px 15px;
      margin: 0;
      border-bottom: 1px solid #1a1a1a;
      font-family: 'Courier New', monospace;
    }

    .example-code {
      padding: 15px;
      margin: 0;
      border-radius: 0;
    }

    .canvas-demo {
      width: 100%;
      height: 280px;
      background-color: #050505;
      border-top: 1px solid #1a1a1a;
      position: relative;
      overflow: hidden;
    }

    .canvas-demo canvas {
      display: block;
      width: 100%;
      height: 100%;
      border: 1px solid #1a1a1a;
    }

    .canvas-label {
      position: absolute;
      bottom: 10px;
      right: 10px;
      background-color: rgba(0, 0, 0, 0.8);
      color: #0f0;
      padding: 4px 8px;
      font-size: 12px;
      font-family: 'Courier New', monospace;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      font-family: 'Courier New', monospace;
    }

    th, td {
      border: 1px solid #1a1a1a;
      padding: 10px 15px;
      text-align: left;
    }

    th {
      background-color: #0a1a0a;
      color: #0f0;
    }

    td {
      background-color: #0a0a0a;
      color: #aaa;
    }

    td code {
      background-color: #111;
      padding: 2px 6px;
    }

    .tldr-box {
      background-color: #0a1a0a;
      border: 1px solid #0f0;
      padding: 20px;
      margin: 20px 0;
    }

    .tldr-box h3 {
      margin-top: 0;
      color: #0f0;
    }

    .ascii-diagram {
      background-color: #0a0a0a;
      border: 1px solid #1a1a1a;
      padding: 20px;
      margin: 20px 0;
      overflow-x: auto;
      font-family: 'Courier New', monospace;
      color: #0f0;
      line-height: 1.4;
      white-space: pre;
    }

    .comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin: 20px 0;
    }

    .comparison-box {
      background-color: #0a0a0a;
      border: 1px solid #1a1a1a;
      padding: 15px;
    }

    .comparison-box h4 {
      margin-top: 0;
      color: #0f0;
      border-bottom: 1px solid #1a1a1a;
      padding-bottom: 10px;
    }

    @media (max-width: 768px) {
      body {
        padding: 10px;
      }

      h1 {
        font-size: 1.8em;
      }

      h2 {
        font-size: 1.4em;
      }

      .canvas-demo {
        height: 220px;
      }

      .comparison {
        grid-template-columns: 1fr;
      }
    }
  </style>

  <!-- SEO:injected -->
  <meta name="description" content="GCanvas Origin System Documentation - Interactive demo built with GCanvas, a modular 2D canvas rendering and game framework." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://gcanvas.guinetik.com/coordinates.html" />
  <meta property="og:title" content="GCanvas Origin System Documentation" />
  <meta property="og:description" content="GCanvas Origin System Documentation - Interactive demo built with GCanvas, a modular 2D canvas rendering and game framework." />
  <meta property="og:image" content="https://gcanvas.guinetik.com/og_image.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="GCanvas Origin System Documentation" />
  <meta name="twitter:description" content="GCanvas Origin System Documentation - Interactive demo built with GCanvas, a modular 2D canvas rendering and game framework." />
  <meta name="twitter:image" content="https://gcanvas.guinetik.com/og_image.png" />
  <meta name="twitter:creator" content="@guinetik" />
  <link rel="canonical" href="https://gcanvas.guinetik.com/coordinates.html" />
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-1GHJD0LM4Z"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-1GHJD0LM4Z');
  </script>
</head>

<body>
  <header>
    <h1>GCanvas Origin System</h1>
    <p>Understanding the configurable origin-based coordinate system</p>
  </header>

  <section>
    <h2>Overview</h2>
    <p>
      GCanvas uses a <strong>top-left based coordinate system</strong> by default, matching web conventions
      (CSS, DOM, and standard Canvas API). The <code>origin</code> property allows you to configure the
      pivot point for positioning, rotation, and scaling.
    </p>

    <div class="tldr-box">
      <h3>TL;DR - Quick Reference</h3>
      <table>
        <tr>
          <th>Origin</th>
          <th>Behavior</th>
          <th>Use Case</th>
        </tr>
        <tr>
          <td><code>origin: "top-left"</code> (default)</td>
          <td>(x, y) = top-left corner</td>
          <td>UI elements, layouts, web-style positioning</td>
        </tr>
        <tr>
          <td><code>origin: "center"</code></td>
          <td>(x, y) = center point</td>
          <td>Game objects, rotation, scaling</td>
        </tr>
        <tr>
          <td><code>originX: 0.5, originY: 1</code></td>
          <td>Bottom-center</td>
          <td>Sprites standing on ground</td>
        </tr>
        <tr>
          <td><code>originX: 1, originY: 0</code></td>
          <td>Top-right corner</td>
          <td>Right-aligned elements</td>
        </tr>
      </table>
    </div>
  </section>

  <section>
    <h2>1. The Origin Property</h2>
    <p>
      The <code>origin</code> property defines the pivot point of a shape. It accepts either a string
      shorthand or explicit <code>originX</code>/<code>originY</code> values (0-1 normalized).
    </p>

    <h4>String Values:</h4>
    <table>
      <tr>
        <th>Value</th>
        <th>originX</th>
        <th>originY</th>
        <th>Description</th>
      </tr>
      <tr>
        <td><code>"top-left"</code></td>
        <td>0</td>
        <td>0</td>
        <td>Default - position is top-left corner</td>
      </tr>
      <tr>
        <td><code>"center"</code></td>
        <td>0.5</td>
        <td>0.5</td>
        <td>Position is center point</td>
      </tr>
      <tr>
        <td><code>"top-center"</code></td>
        <td>0.5</td>
        <td>0</td>
        <td>Top edge, horizontally centered</td>
      </tr>
      <tr>
        <td><code>"bottom-center"</code></td>
        <td>0.5</td>
        <td>1</td>
        <td>Bottom edge, horizontally centered</td>
      </tr>
      <tr>
        <td><code>"top-right"</code></td>
        <td>1</td>
        <td>0</td>
        <td>Top-right corner</td>
      </tr>
      <tr>
        <td><code>"bottom-left"</code></td>
        <td>0</td>
        <td>1</td>
        <td>Bottom-left corner</td>
      </tr>
      <tr>
        <td><code>"bottom-right"</code></td>
        <td>1</td>
        <td>1</td>
        <td>Bottom-right corner</td>
      </tr>
    </table>

    <div class="example">
      <div class="example-title">Interactive Demo: Origin Positions</div>
      <pre><code class="language-javascript">// Top-left origin (default) - x,y is the top-left corner
const rect1 = new Rectangle({
  x: 100, y: 100,
  width: 80, height: 60,
  color: "#0f0"
  // origin defaults to "top-left" (originX: 0, originY: 0)
});

// Center origin - x,y is the center point
const rect2 = new Rectangle({
  x: 100, y: 100,
  width: 80, height: 60,
  color: "#0ff",
  origin: "center"  // shorthand for originX: 0.5, originY: 0.5
});

// Custom origin - bottom-center for sprites
const sprite = new Rectangle({
  x: 100, y: groundY,
  width: 32, height: 48,
  originX: 0.5,
  originY: 1  // feet at x,y position
});</code></pre>
      <div class="canvas-demo">
        <canvas id="origin-positions-canvas"></canvas>
        <div class="canvas-label">Click to cycle through origins</div>
      </div>
    </div>
  </section>

  <section>
    <h2>2. How Origin Affects Transforms</h2>
    <p>
      The origin point is the pivot for all transformations: positioning, rotation, and scaling
      all happen relative to the origin.
    </p>

    <div class="ascii-diagram">
originX: 0, originY: 0 (top-left)    originX: 0.5, originY: 0.5 (center)
┌─────────────────┐                  ┌─────────────────┐
│●                │                  │                 │
│  (x,y) here     │                  │        ●        │
│                 │                  │   (x,y) here    │
│                 │                  │                 │
└─────────────────┘                  └─────────────────┘
  Rotation around                      Rotation around
  top-left corner                      center point

originX: 1, originY: 0 (top-right)   originX: 0.5, originY: 1 (bottom-center)
┌─────────────────┐                  ┌─────────────────┐
│                ●│                  │                 │
│      (x,y) here │                  │                 │
│                 │                  │                 │
│                 │                  │        ●        │
└─────────────────┘                  └───(x,y) here────┘
  Good for right-                      Good for sprites
  aligned elements                     standing on ground</div>

    <div class="example">
      <div class="example-title">Interactive Demo: Rotation with Different Origins</div>
      <pre><code class="language-javascript">// Same position, different origins = different rotation behavior

// Rotates around top-left corner
const rect1 = new Rectangle({
  x: 150, y: 100,
  width: 60, height: 40,
  rotation: Math.PI / 4,
  origin: "top-left"
});

// Rotates around center
const rect2 = new Rectangle({
  x: 300, y: 100,
  width: 60, height: 40,
  rotation: Math.PI / 4,
  origin: "center"
});

// Rotates around bottom-center
const rect3 = new Rectangle({
  x: 450, y: 100,
  width: 60, height: 40,
  rotation: Math.PI / 4,
  origin: "bottom-center"
});</code></pre>
      <div class="canvas-demo">
        <canvas id="rotation-origins-canvas"></canvas>
        <div class="canvas-label">Watch rotation pivot points</div>
      </div>
    </div>
  </section>

  <section>
    <h2>3. Scaling with Origin</h2>
    <p>
      Scaling expands or contracts from the origin point. This is especially important for
      animations and hover effects.
    </p>

    <div class="example">
      <div class="example-title">Interactive Demo: Scaling with Different Origins</div>
      <pre><code class="language-javascript">// Hover effect: scale from center (natural feel)
button.on('hover', () => {
  button.scaleX = 1.1;
  button.scaleY = 1.1;
});
// With origin: "center", button grows equally in all directions

// Scale from bottom (character jumping)
character.originY = 1;  // bottom-center
character.scaleY = 0.8; // squash
// Character compresses toward the ground</code></pre>
      <div class="canvas-demo">
        <canvas id="scaling-origins-canvas"></canvas>
        <div class="canvas-label">Hover over shapes to see scaling</div>
      </div>
    </div>
  </section>

  <section>
    <h2>4. Migration: Center to Top-Left</h2>
    <p>
      GCanvas originally used center-based positioning. The new top-left default matches web
      conventions better. Here's how to migrate:
    </p>

    <div class="warning">
      <strong>Breaking Change:</strong> If upgrading from older GCanvas versions, add
      <code>origin: "center"</code> to shapes that need center-based positioning.
    </div>

    <div class="comparison">
      <div class="comparison-box">
        <h4>Old (Center-based)</h4>
        <pre><code class="language-javascript">// x,y was the center
const rect = new Rectangle({
  x: 100, y: 100,
  width: 80, height: 60
});
// Center was at (100, 100)
// Corners at (60,70) to (140,130)</code></pre>
      </div>
      <div class="comparison-box">
        <h4>New (Top-left default)</h4>
        <pre><code class="language-javascript">// x,y is now the top-left
const rect = new Rectangle({
  x: 100, y: 100,
  width: 80, height: 60,
  origin: "center"  // Add this!
});
// Now behaves like old version</code></pre>
      </div>
    </div>

    <h3>Quick Migration Guide</h3>
    <table>
      <tr>
        <th>Old Code</th>
        <th>New Code</th>
      </tr>
      <tr>
        <td><code>new Circle(50, { x: 100, y: 100 })</code></td>
        <td><code>new Circle(50, { x: 100, y: 100, origin: "center" })</code></td>
      </tr>
      <tr>
        <td><code>new Rectangle({ x: 100, y: 100, ... })</code></td>
        <td><code>new Rectangle({ x: 100, y: 100, ..., origin: "center" })</code></td>
      </tr>
      <tr>
        <td>Shapes in Groups</td>
        <td>Add <code>origin: "center"</code> to each shape</td>
      </tr>
    </table>
  </section>

  <section>
    <h2>5. Text Alignment (Independent)</h2>
    <p>
      <code>TextShape</code> uses the standard <code>align</code> and <code>baseline</code> properties
      which work independently from the origin system.
    </p>

    <div class="example">
      <div class="example-title">Interactive Demo: Text Alignment</div>
      <pre><code class="language-javascript">// Text alignment is controlled separately
const text = new TextShape("Hello World", {
  x: 200, y: 100,
  color: "#0f0",
  font: "16px monospace",
  align: "center",     // horizontal: left, center, right
  baseline: "middle"   // vertical: top, middle, bottom
});

// Origin still affects transforms (rotation, scale)
text.origin = "center";
text.rotation = 0.1;  // Rotates around text center</code></pre>
      <div class="canvas-demo">
        <canvas id="text-alignment-canvas"></canvas>
        <div class="canvas-label">Click to cycle alignments</div>
      </div>
    </div>
  </section>

  <section>
    <h2>6. Circles and Bounding Boxes</h2>
    <p>
      For circles, the origin is based on the bounding box, not the visual circle. This ensures
      consistent behavior with other shapes.
    </p>

    <div class="ascii-diagram">
Circle with origin: "top-left"       Circle with origin: "center"
┌─────────────────┐                  ┌─────────────────┐
│● ╭─────╮        │                  │    ╭─────╮      │
│  │     │        │                  │    │  ●  │      │
│  │     │        │                  │    │     │      │
│  ╰─────╯        │                  │    ╰─────╯      │
└─────────────────┘                  └─────────────────┘
  (x,y) at top-left                    (x,y) at center
  of bounding box                      of bounding box</div>

    <div class="example">
      <div class="example-title">Interactive Demo: Circle Origins</div>
      <pre><code class="language-javascript">// Circle origin uses bounding box
const circle = new Circle(30, {
  x: 100, y: 100,
  color: "#0f0",
  origin: "center"  // Center of bounding box = center of circle
});

// For top-left origin:
// (x,y) is top-left of the bounding box
// Circle center is at (x + radius, y + radius)</code></pre>
      <div class="canvas-demo">
        <canvas id="circle-origins-canvas"></canvas>
        <div class="canvas-label">Click to toggle origin</div>
      </div>
    </div>
  </section>

  <section>
    <h2>7. Practical Examples</h2>

    <h3>Game Character (Bottom-Center Origin)</h3>
    <pre><code class="language-javascript">// Character sprite standing on ground
const player = new Sprite(this, {
  x: groundX,
  y: groundY,
  originX: 0.5,
  originY: 1  // Feet at position
});

// Jump animation - position is always feet location
player.y = groundY - jumpHeight;</code></pre>

    <h3>UI Button (Center Origin)</h3>
    <pre><code class="language-javascript">// Button centered on screen
const button = new Button(this, {
  x: this.width / 2,
  y: this.height / 2,
  origin: "center"
});

// Hover scale effect works naturally
button.on('hover', () => {
  button.scaleX = button.scaleY = 1.1;
});</code></pre>

    <h3>HUD Elements (Corner Origins)</h3>
    <pre><code class="language-javascript">// Score at top-left
const score = new Text(this, "Score: 0", {
  x: 10, y: 10,
  origin: "top-left"  // Default
});

// Lives at top-right
const lives = new Text(this, "Lives: 3", {
  x: this.width - 10,
  y: 10,
  origin: "top-right"
});</code></pre>
  </section>

  <section>
    <h2>8. Complete Origin Reference</h2>

    <div class="example">
      <div class="example-title">Interactive Demo: All Origin Positions</div>
      <div class="canvas-demo" style="height: 350px;">
        <canvas id="all-origins-canvas"></canvas>
        <div class="canvas-label">All 9 origin positions</div>
      </div>
    </div>

    <h3>Quick Reference Table</h3>
    <table>
      <tr>
        <th>Use Case</th>
        <th>Recommended Origin</th>
        <th>Why</th>
      </tr>
      <tr>
        <td>UI layouts</td>
        <td><code>"top-left"</code></td>
        <td>Matches CSS/web conventions</td>
      </tr>
      <tr>
        <td>Game objects</td>
        <td><code>"center"</code></td>
        <td>Natural rotation/scaling pivot</td>
      </tr>
      <tr>
        <td>Characters</td>
        <td><code>originX: 0.5, originY: 1</code></td>
        <td>Feet stay on ground</td>
      </tr>
      <tr>
        <td>Buttons/hover effects</td>
        <td><code>"center"</code></td>
        <td>Scale grows in all directions</td>
      </tr>
      <tr>
        <td>Right-aligned UI</td>
        <td><code>"top-right"</code></td>
        <td>Easy to anchor to right edge</td>
      </tr>
      <tr>
        <td>3D objects</td>
        <td><code>"center"</code></td>
        <td>Rotation around center</td>
      </tr>
    </table>
  </section>

  <section>
    <h2>See Also</h2>
    <ul class="feature-list">
      <li><a href="pipeline.html" style="color: #0f0;">Rendering Pipeline</a> - How objects are rendered each frame</li>
      <li><a href="gameobjects.html" style="color: #0f0;">Game Objects</a> - Understanding the object hierarchy</li>
      <li><a href="transforms.html" style="color: #0f0;">Transforms Demo</a> - Interactive transform examples</li>
      <li><a href="layouts.html" style="color: #0f0;">Layout Demo</a> - Layout system in action</li>
    </ul>
  </section>

  <!-- Prism.js scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>

  <!-- Demo scripts -->
  <script type="module" src="./js/coordinates.js"></script>
</body>

</html>
